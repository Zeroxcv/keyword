<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/css/bootstrap.css}" >
    <link rel="stylesheet" th:href="@{/vendor/bootstrap/css/bootstrap1.css}" >
    <link th:href="@{/bootstrap-table-master/dist/bootstrap-table.css}" rel="stylesheet"/>
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" th:href="@{/vendor/font-awesome/css/font-awesome.min.css}">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" th:href="@{/css/fontastic.css}">
    <!-- theme stylesheet-->
    <link rel="stylesheet" th:href="@{/css/style.default.css}" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" th:href="@{/css/custom.css}">
    <!-- Favicon-->
    <link rel="shortcut icon" th:href="@{/img/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
    <script th:src="@{https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js}"></script>
    <script th:src="@{https://oss.maxcdn.com/respond/1.4.2/respond.min.js}"></script><![endif]-->
    <script th:src="@{/vendor/jquery/jquery-3.4.1.js}"></script>
    <script th:src="@{/bootstrap-table-master/dist/bootstrap-table.js}"></script>
    <script th:src="@{/vendor/popper/popper.min.js}"></script>
    <script th:src="@{/vendor/js/front.js}"></script>
    <script>

        function extract(){
            var textContent = document.getElementById("t1").value;
            alert(textContent);
            $.post("/keyword",{
                    url:"localhost:8080",
                    text:textContent
                },
                function(data,status){
                    alert("数据: \n" + data + "\n状态: " + status);
                    var tableInfos = document.getElementById('tableInfo3');
                    var jsonobj= eval('(' + data + ')');
                    var code = '<TABLE class="table table-striped">';
                    code += '<TR><TH>关键词</TH><TH>权重</TH></TR>';
                    for(var i=0;i<jsonobj.length;i++){

                        code += '<TR><TD>'+jsonobj[i].word+'</TD><TD>'+jsonobj[i].score+'</TD></TR>';
                    }
                    tableInfos.innerHTML = code + '</TABLE>';
                });
        }
        function queryPost(){
            window.location.href='essay';
            /*$.get("/essay",function(data,status){
                //alert("数据: \n" + data + "\n状态: " + status);
                var tableInfos = document.getElementById('showContent');
                tableInfos.innerHTML = data;
                $(".showContent").load(location.href+" .showContent");
            });*/
        }

        function queryEssayAll() {
            var tableInfos = document.getElementById('tableInfo1');
            tableInfos.innerHTML = "";
            //隐藏div的内容
            //tableInfos.style.visibility = "hidden";
            $("#mytable").bootstrapTable({
                url:"/essay/findAll",  //请求地址
                striped : true, //是否显示行间隔色
                pageNumber : 1, //初始化加载第一页
                pagination : true,//是否分页
                sidePagination : 'client',//server:服务器端分页|client：前端分页
                pageSize : 5,//单页记录数
                pageList : [ 5, 10],//可选择单页记录数
                //showRefresh : true,//刷新按钮
                columns : [ {
                    title : '编号',
                    field : 'id',
                    sortable : true
                }, {
                    title : '文章标签',
                    field : 'textLabel',
                    sortable : true
                }, {
                    title : '文章标题',
                    field : 'title',
                    sortable : true
                },{
                    title : '文章内容',
                    field : 'textContent',
                    sortable : true,
                    cellStyle:{
                        css:{
                            "overflow": "hidden",
                            "text-overflow": "ellipsis",
                            "white-space": "nowrap",
                            "max-width": "150px"
                            // "text-overflow：" : "ellipsis"
                        }
                    }
                },{
                    title : '文章发布日期',
                    field : 'publishedData',
                    sortable : true
                },{
                    title : '文章来源',
                    field : 'dataSources',
                    sortable : true
                },{
                    title: '操作    <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">添加文章</button>',
                    field: 'publicationTime',
                    formatter: operation,//对资源进行操作

                }]
            })
        }
        function operation(value, row, index) {
            var htm = "<a href='/delete_one?bookName=" + row["bookName"] + "'>删除</a> " +
                "<a href='/modify_one.xhtml?bookName=" + row["bookName"] + "'>修改</a>"
            return htm;
        }
    </script>

    <title>用户列表</title>
</head>



<!--    <b th:text="${keywordData}"/>-->
<!--<form action="/user/userlist/keyword" method="post">-->
<!--    First name:<br>-->
<!--    <input type="text" name="text" value="text">    <br>-->
<!--    <input type="submit" value="Submit">-->
<!--</form>-->
<body>
<div class="page">
    <!-- Main Navbar-->
    <header class="header">
        <nav class="navbar">
            <!-- Search Box-->
            <div class="search-box">
                <button class="dismiss"><i class="icon-close"></i></button>
                <form id="searchForm" action="#" role="search">
                    <input type="search" placeholder="What are you looking for..." class="form-control"/>
                </form>
            </div>
            <div class="container-fluid">
                <div class="navbar-holder d-flex align-items-center justify-content-between">
                    <!-- Navbar Header-->
                    <div class="navbar-header">
                        <!-- Navbar Brand --><a href="index.html" class="navbar-brand d-none d-sm-inline-block">
                        <div class="brand-text d-none d-lg-inline-block"><strong>关键词提取</strong></div>
                        <div class="brand-text d-none d-sm-inline-block d-lg-none"><strong>KW</strong></div></a>
                        <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
                    </div>
                    <!-- Navbar Menu -->
                    <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                        <!-- Search-->
                        <li class="nav-item d-flex align-items-center"><a id="search" href="#"><i class="icon-search"></i></a></li>
                        <!-- Logout    -->
                        <li class="nav-item"><a href="login.html" class="nav-link logout"> <span class="d-none d-sm-inline">退出</span><i class="fa fa-sign-out"></i></a></li>
                    </ul>
                </div>
            </div>
        </nav>

    </header>
    <div class="page-content d-flex align-items-stretch">
        <nav class="side-navbar">
            <!-- Sidebar Header-->
            <div class="sidebar-header d-flex align-items-center">
                <div class="avatar"><img th:src="@{/img/avatar-1.jpg}" alt="..." class="img-fluid rounded-circle"></div>
                <div class="title">
                    <h1 class="h4">姓名</h1>
                </div>
            </div>
            <!-- Sidebar Navidation Menus-->
            <span class="heading">菜单</span>
            <ul class="list-unstyled">
                <li class="active"><a href=""> <i class="icon-home"></i>文章关键词识别</a></li>
                <li><a onclick="queryEssayAll()"> <i class="icon-grid"></i>查询文章</a></li>
<!--                <li><a href="/essay"> <i class="icon-grid"></i>查询文章</a></li>-->
                <li><a href="essay/add"> <i class="fa fa-bar-chart"></i>文章录入</a></li>
                <li><a href="forms.html"> <i class="icon-padnote"></i>填写内容</a></li>
                <li><a href="#exampledropdownDropdown" aria-expanded="false" data-toggle="collapse"> <i class="icon-interface-windows"></i>一级菜单</a>
                    <ul id="exampledropdownDropdown" class="collapse list-unstyled ">
                        <li><a href="#">二级表单1</a></li>
                        <li><a href="#">二级表单2</a></li>
                        <li><a href="#">二级表单3</a></li>
                    </ul>
                </li>
            </ul>

        </nav>
        <div class="content-inner" style="padding-bottom: 78.4px" id="showContent">
            <header class="page-header">
                <div class="container-fluid">
                    <h2 class="no-margin-bottom">提取关键词</h2>
                </div>
            </header>
            <div id="tableInfo1" class="table table-striped">
            <div style="padding: 10px 10px 10px 10px">
                <div style="padding: 10px 10px 10px 10px">
                    <textarea class="form-control" rows="8" id="t1" ></textarea>
                </div>
                <div style="padding: 10px 10px 10px 10px;">
                    <button  class="btn btn-primary btn-lg" id="b1" style="text-align:center;margin-left: 50%;margin-right: 50%" onclick="extract()">提取</button>
                </div>
            </div>
                <div div id="tableInfo3" class="table table-hover">
                </div>
                </div>

                <div id="tableInfo2" >
                    <table id="mytable"></table>
                </div>
            </div>
        </div>
    </div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Modal title</h4>
            </div>
            <div class="modal-body">
                ...
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
</div>

</body>
</html>